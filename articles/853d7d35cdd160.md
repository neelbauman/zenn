---
title: "python Projectã§è‡ªå‹•ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã§ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ã‚±ãƒ¼ã‚¹"
emoji: "ğŸŒŸ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [git, uv]
published: true
---

# uvã¨hatch-vcsã«ã‚ˆã‚‹å‹•çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ç§»è¡Œï¼šPyPI 400ã‚¨ãƒ©ãƒ¼ã¨ç„¡é™ãƒ«ãƒ¼ãƒ—ã®è§£æ¶ˆ

Pythonã®OSSé–‹ç™ºã«ãŠã„ã¦ã€`pyproject.toml` ã‚„ `__init__.py` ã«ç›´æ›¸ãã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã®ä¸æ•´åˆã¯ã€ãƒªãƒªãƒ¼ã‚¹ä½œæ¥­ã«ãŠã‘ã‚‹å…¸å‹çš„ãªæŠ€è¡“çš„è² å‚µã§ã‚ã‚‹ã€‚

æœ¬è¨˜äº‹ã§ã¯ã€Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ `uv` ã‚’ç”¨ã„ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãŠã„ã¦ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚’Gitã‚¿ã‚°ã«ä¸€å…ƒåŒ–ã™ã‚‹ã€Œå‹•çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ï¼ˆ`hatch-vcs`ï¼‰ã€ã¸ç§»è¡Œã—ãŸéš›ã®è¨˜éŒ²ã‚’å…±æœ‰ã™ã‚‹ã€‚

ç‰¹ã«ç§»è¡Œãƒ—ãƒ­ã‚»ã‚¹ã§ç›´é¢ã—ãŸ2ã¤ã®ç‰¹æœ‰ã®èª²é¡Œï¼ˆPyPIã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼ã¨è‡ªå‹•ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ï¼‰ã¨ãã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã€è§£æ±ºç­–ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚

## 1. äº‹è±¡ï¼šæ‰‹å‹•ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã®é™ç•Œã¨ç§»è¡Œ

ã“ã‚Œã¾ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯è‡ªä½œã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆ`bump_version.py`ï¼‰ã‚’ç”¨ã„ã¦è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ–‡å­—åˆ—ã‚’æ›¸ãæ›ãˆã¦ã„ãŸã€‚ã—ã‹ã—ã€æ‰‹ä½œæ¥­ã§ã‚ã‚‹ãŸã‚ä¸æ•´åˆã®ãƒªã‚¹ã‚¯ãŒé«˜ã¾ã‚Šã€ãƒªãƒªãƒ¼ã‚¹ä½œæ¥­ã®è² æ‹…ã¨ãªã£ã¦ã„ãŸã€‚

ãã“ã§ã€ã€ŒGitã®ã‚¿ã‚°ã‚’å”¯ä¸€ã®æ­£è§£ï¼ˆSingle Source of Truthï¼‰ã€ã¨ã™ã‚‹æ§‹æˆã¸åˆ·æ–°ã™ã‚‹ãŸã‚ã€ãƒ“ãƒ«ãƒ‰ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’ `uv_build` ã‹ã‚‰ `hatchling` ã«å¤‰æ›´ã—ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã‚ã‚‹ `hatch-vcs` ã‚’å°å…¥ã—ãŸã€‚

```toml:pyproject.toml
[build-system]
requires = ["hatchling", "hatch-vcs"]
build-backend = "hatchling.build"

[project]
name = "beautyspot"
dynamic = ["version"]  # ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã‚’å»ƒæ­¢

[tool.hatch.version]
source = "vcs"

[tool.hatch.build.hooks.vcs]
version-file = "src/beautyspot/_version.py"

```

ã“ã®è¨­å®šã«ã‚ˆã‚Šã€`uv build` å®Ÿè¡Œæ™‚ã«Gitã‚¿ã‚°ã‹ã‚‰è‡ªå‹•çš„ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒç®—å‡ºã•ã‚Œã‚‹ã€‚ã—ã‹ã—ã€å®Ÿéš›ã®ãƒªãƒªãƒ¼ã‚¹ãƒ•ãƒ­ãƒ¼ã«çµ„ã¿è¾¼ã‚€éç¨‹ã§2ã¤ã®ç½ ã«é™¥ã£ãŸã€‚

## 2. èª²é¡Œ1ï¼šPyPIã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ™‚ã® 400 Bad Request

ç§»è¡Œå¾Œã€åˆã‚ã¦ãƒ“ãƒ«ãƒ‰ã¨PyPIã¸ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆ`uv publish`ï¼‰ã‚’è©¦ã¿ãŸéš›ã€ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå¤±æ•—ã—ãŸã€‚

```bash
error: Failed to publish `dist/beautyspot-2.2.6.dev9+gbd456d23d.d20260202.tar.gz`
Caused by: Upload failed with status code 400 Bad Request. Server says: 400 The use of local versions in <Version('2.2.6.dev9+gbd456d23d.d20260202')> is not allowed.

```

### ãªãœãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒç”Ÿæˆã•ã‚ŒãŸã®ã‹

PyPIã¯ä»•æ§˜ä¸Šã€`+` ã‚’å«ã‚€ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³è­˜åˆ¥å­ï¼ˆLocal Version Identifiersï¼‰ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚’è¨±å¯ã—ã¦ã„ãªã„ã€‚
`hatch-vcs` ã¯ã€ç¾åœ¨ã®Gitã®ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ãŒ**ã€Œç›´è¿‘ã®ã‚¿ã‚°ã¨å®Œå…¨ã«ä¸€è‡´ã—ã¦ã„ãªã„çŠ¶æ…‹ã€**ã§ã‚ã‚‹å ´åˆã€è‡ªå‹•çš„ã«é–‹ç™ºç”¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆä¾‹ï¼š`.dev9+gbd456d23d`ï¼‰ã‚’ç®—å‡ºã™ã‚‹ä»•æ§˜ã¨ãªã£ã¦ã„ã‚‹ã€‚

å½“æ™‚ã®çŠ¶æ³ã¯ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã«è©²å½“ã—ã¦ã„ãŸã€‚

* æ–°ã—ã„ã‚¿ã‚°ï¼ˆ`v2.2.6`ï¼‰ã‚’æ‰“ã¤å‰ã«ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã—ã¾ã£ãŸã€‚
* Gitã§ã‚³ãƒŸãƒƒãƒˆã•ã‚Œã¦ã„ãªã„å¤‰æ›´ï¼ˆDirtyãªçŠ¶æ…‹ï¼‰ãŒæ®‹ã£ã¦ã„ãŸã€‚

**å¯¾å‡¦æ³•:** ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ã‚’è¡Œã†éš›ã¯ã€å¿…ãšå¤‰æ›´ã‚’å…¨ã¦ã‚³ãƒŸãƒƒãƒˆã—ã€**Gitã‚¿ã‚°ã‚’æ‰“ã£ã¦ã‹ã‚‰** `uv build` ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

## 3. èª²é¡Œ2ï¼š_version.py ã‚³ãƒŸãƒƒãƒˆã®ç„¡é™ãƒ«ãƒ¼ãƒ—

èª²é¡Œ1ã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ã‚³ãƒŸãƒƒãƒˆã¨ã‚¿ã‚°æ‰“ã¡ã‚’è¡Œã£ãŸãŒã€ä»Šåº¦ã¯åˆ¥ã®å•é¡ŒãŒç™ºç”Ÿã—ãŸã€‚
`uv build` ã‚’å®Ÿè¡Œã™ã‚‹ãŸã³ã«ã€`hatch-vcs` ã®è¨­å®šã§æŒ‡å®šã—ãŸ `src/beautyspot/_version.py` ãŒæ–°è¦ä½œæˆãƒ»æ›´æ–°ã•ã‚Œã¦ã—ã¾ã„ã€Gitã®å·®åˆ†ï¼ˆå¤‰æ›´ã‚ã‚Šï¼‰ã¨ã—ã¦æ¤œçŸ¥ã•ã‚Œã¦ã—ã¾ã†ã®ã§ã‚ã‚‹ã€‚

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã¨HEADãŒã‚¿ã‚°ã‹ã‚‰1ã¤é€²ã‚“ã§ã—ã¾ã„ã€å†ã³ã€Œã‚¿ã‚°ã¨ä¸€è‡´ã—ãªã„çŠ¶æ…‹ã€ã«ãªã‚Šã€èª²é¡Œ1ã®ã‚¨ãƒ©ãƒ¼ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ç”Ÿæˆï¼‰ãŒå†ç™ºã™ã‚‹ã€Œç„¡é™ãƒ«ãƒ¼ãƒ—ã€ã«é™¥ã£ãŸã€‚

### ä»•çµ„ã¿ã®ç†è§£ã¨è§£æ±ºç­–

`_version.py` ã¯ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§ã¯ãªãã€ãƒ“ãƒ«ãƒ‰æ™‚ã«å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹**æˆæœç‰©ï¼ˆArtifactï¼‰**ã§ã‚ã‚‹ã€‚ã—ãŸãŒã£ã¦ã€Gitã®ç®¡ç†ä¸‹ã«ç½®ãã¹ãã§ã¯ãªã„ã€‚

**å¯¾å‡¦æ³•:** `.gitignore` ã«ç”Ÿæˆã•ã‚Œã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã—ã€Gitã®è¿½è·¡å¯¾è±¡ã‹ã‚‰å¤–ã™ã€‚

```text:.gitignore
# Generated version file
src/beautyspot/_version.py

```

è¿½è·¡ã‹ã‚‰å¤–ã—ã¦ã‚‚å•é¡Œã¯ãªã„ã€‚`uv build` ãŒå®Ÿè¡Œã•ã‚Œã‚‹éš›ã€`hatchling` ãŒç”Ÿæˆã•ã‚ŒãŸ `_version.py` ã‚’è‡ªå‹•çš„ã«Wheelãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸­ã«ç‰©ç†çš„ã«æ¢±åŒ…ã—ã¦ãã‚Œã‚‹ãŸã‚ã€PyPIã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‰‹å…ƒã«ã¯æ­£ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ãŒå±Šãä»•æ§˜ã«ãªã£ã¦ã„ã‚‹ã€‚

## 4. å¯¾å‡¦æ³•ï¼šæ–°ã—ã„ãƒªãƒªãƒ¼ã‚¹ãƒ•ãƒ­ãƒ¼ã®ç¢ºç«‹

æœ€çµ‚çš„ã«ã€æ‰‹å‹•ã®ãƒãƒ³ãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚„è¤‡é›‘ãªãƒã‚§ãƒƒã‚¯ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ¨ã¦ã€ä»¥ä¸‹ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ•ãƒ­ãƒ¼ã«åˆ°é”ã—ãŸã€‚

1. **å¤‰æ›´ã®ç¢ºå®š:** `git commit -m "feat: new feature"`
2. **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ç¢ºå®š:** `git tag v2.3.0`
3. **ãƒªãƒªãƒ¼ã‚¹ã®å®Ÿè¡Œ:** `make release` ï¼ˆMakefileã®releaseã‚³ãƒãƒ³ãƒ‰å†…éƒ¨ã§ `uv build` ã¨ `uv publish` ã‚’å®Ÿè¡Œï¼‰

ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸ãæ›ãˆå¿˜ã‚Œã«ã‚ˆã‚‹ä¸æ•´åˆã¯æ§‹é€ ä¸Šç™ºç”Ÿã—ãªããªã‚Šã€ãƒªãƒªãƒ¼ã‚¹ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã®å®‰å…¨æ€§ãŒåŠ‡çš„ã«å‘ä¸Šã—ãŸã€‚

## ã¾ã¨ã‚

* æ‰‹å‹•ã«ã‚ˆã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®åŒæœŸã¯ã€`hatch-vcs` ã‚’ç”¨ã„ãŸå‹•çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã¸ã®ç§»è¡Œã§æ ¹æœ¬è§£æ±ºã§ãã‚‹ã€‚
* PyPIã® `400 Bad Request` ã¯ã€Gitã‚¿ã‚°ã¨ç¾åœ¨ã®ã‚³ãƒŸãƒƒãƒˆçŠ¶æ…‹ãŒä¸€è‡´ã—ã¦ãŠã‚‰ãšã€é–‹ç™ºç”¨ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒç”Ÿæˆã•ã‚ŒãŸã“ã¨ã«èµ·å› ã™ã‚‹ã€‚
* ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ã®å‰ã«ã€å¿…ãšã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã§Gitã‚¿ã‚°ã‚’æ‰“ã¤å¿…è¦ãŒã‚ã‚‹ã€‚
* `hatch-vcs` ãŒè‡ªå‹•ç”Ÿæˆã™ã‚‹ `_version.py` ã¯ `.gitignore` ã«è¿½åŠ ã—ã€Gitã§è¿½è·¡ã—ã¦ã¯ãªã‚‰ãªã„ï¼ˆç„¡é™ãƒ«ãƒ¼ãƒ—ã®åŸå› ã«ãªã‚‹ãŸã‚ï¼‰ã€‚
* ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ï¼ˆ`hatchling`ï¼‰ã®é©åˆ‡ãªè¨­å®šã«ã‚ˆã‚Šã€Gitã®è¿½è·¡å¤–ã§ã‚ã£ã¦ã‚‚æœ€çµ‚çš„ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¯æ­£ã—ããƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ãŒåŒæ¢±ã•ã‚Œã‚‹ã€‚

## è¿½è¨˜: å®Ÿéš›ã«é‹ç”¨ã—ã¦ã„ã‚‹Makefileï¼ˆ2026å¹´02æœˆ24æ—¥æ™‚ç‚¹ï¼‰
```makefile
.PHONY: help install test lint lint-fix format build docs-serve docs-deploy clean pypi-publish test-publish version release

# Gitã‚¿ã‚°ã‹ã‚‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—ï¼ˆã‚¿ã‚°ãŒãªã„å ´åˆã¯é–‹ç™ºç‰ˆæ‰±ã„ï¼‰
VERSION := $(shell git describe --tags --abbrev=0 2>/dev/null | sed 's/^v//')
ifeq ($(VERSION),)
VERSION := 0.0.0-dev
endif

help:  ## ã“ã®ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = ":.*?## "}; {printf "\033[36m%-20s\033[0m %s\n", $$1, $$2}'

install:  ## ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
	uv sync --all-groups

test:  ## ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
	uv run pytest; echo "=========== START pyright typing test =============="; uv run pyright tests/typing; echo "=========== FINISH pyright typing test ==============";

lint:  ## ãƒªãƒ³ãƒˆãƒã‚§ãƒƒã‚¯
	uvx ruff check .

lint-fix:  ## ãƒªãƒ³ãƒˆãƒã‚§ãƒƒã‚¯ (--fixã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§è‡ªå‹•ä¿®æ­£ï¼‰
	uvx ruff check . --fix

format:  ## ã‚³ãƒ¼ãƒ‰ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
	uvx ruff format .

build: clean test  ## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ï¼ˆãƒ†ã‚¹ãƒˆå¾Œï¼‰
	# hatch-vcs ãŒè‡ªå‹•çš„ã«Gitã‚¿ã‚°ã‹ã‚‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åŸ‹ã‚è¾¼ã¿ã¾ã™
	uv build

docs-serve:  ## ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ç¢ºèª
	uvx --with mkdocs-material --with "mkdocstrings[python]" mkdocs serve

docs-deploy:  ## GitHub Pagesã«ãƒ‡ãƒ—ãƒ­ã‚¤
	uvx --with mkdocs-material --with "mkdocstrings[python]" mkdocs gh-deploy

clean:  ## ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
	rm -rf dist/ .pytest_cache/ .ruff_cache/
	find . -name '__pycache__' -exec rm -rf {} +

version:  ## ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆGitã‚¿ã‚°ï¼‰ã‚’è¡¨ç¤º
	@echo "Current version (from git): $(VERSION)"

pypi-publish: build  ## PyPIã«ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰å…¬é–‹ï¼ˆdist/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå¿…è¦ï¼‰
	@echo "Publishing version $(VERSION) to PyPI..."
	@if [ ! -f .env ]; then \
		echo "Error: .env not found"; \
		exit 1; \
	fi
	@export $$(cat .env | grep -v '^#' | xargs) && \
	uv publish --token $$PYPI_TOKEN
	@echo "âœ“ Published version $(VERSION) to PyPI"

test-publish: build  ## TestPyPIã«å…¬é–‹
	@echo "Publishing version $(VERSION) to TestPyPI..."
	@if [ ! -f .env ]; then \
		echo "Error: .env not found"; \
		exit 1; \
	fi
	@export $$(cat .env | grep -v '^#' | xargs) && \
	uv publish --token $$TEST_PYPI_TOKEN --publish-url https://test.pypi.org/legacy/
	@echo "âœ“ Published version $(VERSION) to TestPyPI"
	@$(MAKE) clean

release: pypi-publish  ## å®Œå…¨ãƒªãƒªãƒ¼ã‚¹ï¼ˆPyPIå…¬é–‹â†’GitHubã‚¿ã‚°Pushï¼‰
	@echo "Pushing tag v$(VERSION) to trigger GitHub Release..."
	git push origin v$(VERSION)
	@echo "âœ“ Release $(VERSION) completed!"

# Makefile (è¿½åŠ æ¡ˆ)

.PHONY: audit visualize update-claude

audit:  ## [Console] ã‚³ãƒ¼ãƒ‰ã®è¤‡é›‘åº¦ã¨ä¿å®ˆæ€§ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›
	@echo "=== Cyclomatic Complexity (Rank C+) ==="
	-uv run radon cc src -a -n C
	@echo "\n=== Maintainability Index (Rank B-) ==="
	-uv run radon mi src -n B

visualize: ## [Image] ä¾å­˜é–¢ä¿‚ã‚°ãƒ©ãƒ•ã®ã¿ç”Ÿæˆ
	@mkdir -p docs/statics/img/generated
	# 1. pydeps ã§ DOT å½¢å¼ã‚’å‡ºåŠ›
	uv run pydeps src/beautyspot \
		--noshow \
		--max-bacon=2 \
		--cluster \
		--show-dot > docs/statics/img/generated/dependency_graph.dot
	
	# 2. æ˜ç¤ºçš„ã« PNG ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
	dot -Tpng docs/statics/img/generated/dependency_graph.dot -o docs/statics/img/generated/dependency_graph.png
	
	@ls -lh docs/statics/img/generated/dependency_graph.png
	@rm docs/statics/img/generated/dependency_graph.dot
	@rm beautyspot.svg
	
	uv run python tools/analyze_structure.py
	uv run --with pylint pyreverse -o png -p beautyspot src/beautyspot --output-directory docs/statics/img/generated/

report: audit visualize## [Report] å…¨è§£æã‚’å®Ÿè¡Œã—ã€docs/quality_report.md ã‚’ç”Ÿæˆ
	@uv run python tools/generate_report.py

update-claude:  ## CLAUDE.md ã®è‡ªå‹•ç”Ÿæˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°
	uv run python tools/generate_claude_ref.py

```
